<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>曦</title>
  <icon>https://bigdata-yx.github.io/imgs/avatar.webp</icon>
  <subtitle>曦</subtitle>
  <link href="https://bigdata-yx.github.io/atom.xml" rel="self"/>
  
  <link href="https://bigdata-yx.github.io/"/>
  <updated>2024-10-28T03:38:03.000Z</updated>
  <id>https://bigdata-yx.github.io/</id>
  
  <author>
    <name>曦</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>(第二套)ZZ052大数据应用与服务赛项赛题</title>
    <link href="https://bigdata-yx.github.io/posts/b2b6.html"/>
    <id>https://bigdata-yx.github.io/posts/b2b6.html</id>
    <published>2024-10-28T03:38:03.000Z</published>
    <updated>2024-10-28T03:38:03.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="模块一：平台搭建与运维"><a href="#模块一：平台搭建与运维" class="headerlink" title="模块一：平台搭建与运维"></a>模块一：平台搭建与运维</h2><h3 id="（一）任务一：大数据平台搭建"><a href="#（一）任务一：大数据平台搭建" class="headerlink" title="（一）任务一：大数据平台搭建"></a><strong>（一）任务一：大数据平台搭建</strong></h3><h4 id="1．子任务一：基础环境准备"><a href="#1．子任务一：基础环境准备" class="headerlink" title="1．子任务一：基础环境准备"></a><strong>1．子任务一：基础环境准备</strong></h4><p>（1）对三台环境更新主机名，配置hosts文件，以node01作为时钟源并进行时间同步；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">其他三台一样</span></span><br><span class="line">[root@localhost ~]# hostnamectl set-hostname master</span><br><span class="line">vi /etc/hosts</span><br></pre></td></tr></table></figure><p>（2）执行命令生成公钥、私钥，实现三台机器间的免秘登陆；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">其他三台一样</span></span><br><span class="line">[root@localhost ~]# ssh-keygen</span><br><span class="line">[root@localhost ~]# ssh-copy-id master</span><br><span class="line">[root@localhost ~]# ssh-copy-id slave1</span><br><span class="line">[root@localhost ~]# ssh-copy-id slave2</span><br></pre></td></tr></table></figure><p>（3）从宿主机&#x2F;root 目录下将文件 jdk-8u212-linux-x64.tar.gz 复制到容器 node01 中的&#x2F;root&#x2F;software 路径中（若路径不存在，则需新建），将 node01 节点 JDK 安装包解压到&#x2F;root&#x2F;software 路径中(若路径不存在，则需新建)；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost software]# mkdir /root/software</span><br><span class="line">[root@localhost software]# tar -zxvf /opt/software/jdk-8u391-linux-x64.tar.gz -C /root/software/</span><br></pre></td></tr></table></figure><p>（4）修改容器中&#x2F;etc&#x2F;profile 文件，设置 JDK 环境变量并使其生效，配置完毕后在 node01 节点分别执行“java - version”和“javac”命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost software]# vi /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">新增</span></span><br><span class="line">export JAVA_HOME=/root/software/jdk</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">[root@localhost software]# source /etc/profile</span><br><span class="line">[root@localhost software]# java -version</span><br><span class="line">java version &quot;1.8.0_391&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_391-b13)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.391-b13, mixed mode)</span><br><span class="line">[root@localhost software]# javac</span><br><span class="line">用法: javac &lt;options&gt; &lt;source files&gt;</span><br><span class="line">其中, 可能的选项包括:</span><br><span class="line">  -g                         生成所有调试信息</span><br><span class="line">  -g:none                    不生成任何调试信息</span><br><span class="line">  -g:&#123;lines,vars,source&#125;     只生成某些调试信息</span><br><span class="line">  -nowarn                    不生成任何警告</span><br><span class="line">  -verbose                   输出有关编译器正在执行的操作的消息</span><br><span class="line">  -deprecation               输出使用已过时的 API 的源位置</span><br><span class="line">  -classpath &lt;路径&gt;            指定查找用户类文件和注释处理程序的位置</span><br><span class="line">  -cp &lt;路径&gt;                   指定查找用户类文件和注释处理程序的位置</span><br><span class="line">  -sourcepath &lt;路径&gt;           指定查找输入源文件的位置</span><br><span class="line">  -bootclasspath &lt;路径&gt;        覆盖引导类文件的位置</span><br><span class="line">  -extdirs &lt;目录&gt;              覆盖所安装扩展的位置</span><br><span class="line">  -endorseddirs &lt;目录&gt;         覆盖签名的标准路径的位置</span><br><span class="line">  -proc:&#123;none,only&#125;          控制是否执行注释处理和/或编译。</span><br><span class="line">  -processor &lt;class1&gt;[,&lt;class2&gt;,&lt;class3&gt;...] 要运行的注释处理程序的名称; 绕过默认的搜索进程</span><br><span class="line">  -processorpath &lt;路径&gt;        指定查找注释处理程序的位置</span><br><span class="line">  -parameters                生成元数据以用于方法参数的反射</span><br><span class="line">  -d &lt;目录&gt;                    指定放置生成的类文件的位置</span><br><span class="line">  -s &lt;目录&gt;                    指定放置生成的源文件的位置</span><br><span class="line">  -h &lt;目录&gt;                    指定放置生成的本机标头文件的位置</span><br><span class="line">  -implicit:&#123;none,class&#125;     指定是否为隐式引用文件生成类文件</span><br><span class="line">  -encoding &lt;编码&gt;             指定源文件使用的字符编码</span><br><span class="line">  -source &lt;发行版&gt;              提供与指定发行版的源兼容性</span><br><span class="line">  -target &lt;发行版&gt;              生成特定 VM 版本的类文件</span><br><span class="line">  -profile &lt;配置文件&gt;            请确保使用的 API 在指定的配置文件中可用</span><br><span class="line">  -version                   版本信息</span><br><span class="line">  -help                      输出标准选项的提要</span><br><span class="line">  -A关键字[=值]                  传递给注释处理程序的选项</span><br><span class="line">  -X                         输出非标准选项的提要</span><br><span class="line">  -J&lt;标记&gt;                     直接将 &lt;标记&gt; 传递给运行时系统</span><br><span class="line">  -Werror                    出现警告时终止编译</span><br><span class="line">  @&lt;文件名&gt;                     从文件读取选项和文件名</span><br></pre></td></tr></table></figure><h4 id="2．子任务二：Hadoop-完全分布式安装配置"><a href="#2．子任务二：Hadoop-完全分布式安装配置" class="headerlink" title="2．子任务二：Hadoop 完全分布式安装配置"></a><strong>2．子任务二：Hadoop 完全分布式安装配置</strong></h4><p>本任务需要使用 root 用户完成相关配置，安装 Hadoop需要配置前置环境。命令中要求使用绝对路径，具体要求如下:</p><p>（1）在 node01 将 Hadoop 解压到&#x2F;root&#x2F;software(若路径不存在，则需新建)目录下，并将解压包分发至 node02、node03 中，其中三节点节点均作为 datanode，配置好相关环境，初始化 Hadoop 环境 namenode；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost software]# tar -zxvf /opt/software/hadoop-3.3.6.tar.gz -C /root/software/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">分发</span></span><br><span class="line">[root@localhost software]# scp -r jdk/ hadoop/ slave1:`pwd`</span><br><span class="line">[root@localhost software]# scp -r jdk/ hadoop/ slave2:`pwd`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">初始化</span></span><br><span class="line">[root@localhost software]# hadoop namenode -format</span><br></pre></td></tr></table></figure><p>（2）开启集群，查看各节点进程。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动</span></span><br><span class="line">[root@localhost software]# start-all.sh</span><br><span class="line">[root@localhost software]# jps</span><br><span class="line">47810 ResourceManager</span><br><span class="line">48597 WebAppProxyServer</span><br><span class="line">49205 JobHistoryServer</span><br><span class="line">47450 SecondaryNameNode</span><br><span class="line">49371 Jps</span><br><span class="line">48060 NodeManager</span><br><span class="line">46766 NameNode</span><br><span class="line">47134 DataNode</span><br></pre></td></tr></table></figure><h4 id="3．子任务三：Hive-安装配置"><a href="#3．子任务三：Hive-安装配置" class="headerlink" title="3．子任务三：Hive 安装配置"></a><strong>3．子任务三：Hive 安装配置</strong></h4><p>（1）从宿主机&#x2F;root 目录下将文件 apache-hive-3.1.2-bin.tar.gz、mysql-connector-java-5.1.37.jar 复制到容器 node03 中的&#x2F;root&#x2F;software 路径中（若路径不存在，则需新建），将 node03 节点 Hive 安装包解压到&#x2F;root&#x2F;software目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf]# tar -zxvf /opt/software/apache-hive-3.1.3-bin.tar.gz -C /root/software/</span><br></pre></td></tr></table></figure><p>（2）设置 Hive 环境变量，并使环境变量生效，执行命令 hive –version 查看版本信息；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf]# vi /etc/profile</span><br><span class="line">export JAVA_HOME=/root/software/jdk</span><br><span class="line">export HADOOP_HOME=/root/software/hadoop</span><br><span class="line">export HIVE_HOME=/root/software/hive</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HIVE_HOME/bin</span><br><span class="line"></span><br><span class="line">[root@master conf]# hive --version</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hive/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span><br><span class="line">SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">Hive 3.1.3</span><br><span class="line">Git git://MacBook-Pro.fios-router.home/Users/ngangam/commit/hive -r 4df4d75bf1e16fe0af75aad0b4179c34c07fc975</span><br><span class="line">Compiled by ngangam on Sun Apr 3 16:58:16 EDT 2022</span><br><span class="line">From source with checksum 5da234766db5dfbe3e92926c9bbab2af</span><br></pre></td></tr></table></figure><p>（3）修改相关配置，添加依赖包，将 MySQL 数据库作为Hive 元数据库，初始化 Hive 元数据。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置好hive-env.sh和hive-site.xml</span></span><br><span class="line">[root@master conf]# cp /opt/software/mysql-connector-java-5.1.34.jar /root/software/hive/lib/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">初始化</span></span><br><span class="line">[root@master conf]# schematool -initSchema -dbType mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动</span></span><br><span class="line">[root@master hive]# mkdir logs</span><br><span class="line">[root@master hive]# nohup hive --service metastore &gt;&gt; logs/metastore.log 2&gt;&amp;1 &amp;</span><br><span class="line">[1] 128547</span><br><span class="line"></span><br><span class="line">[root@master hive]# hive</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hive/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span><br><span class="line">SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">which: no hbase in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/software/jdk/bin:/root/software/hadoop/bin:/root/software/hadoop/sbin:/root/software/hive/bin:/root/bin)</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hive/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span><br><span class="line">SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">Hive Session ID = 7e262d28-438c-4922-af9c-1323adfa7f88</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration in jar:file:/root/software/hive/lib/hive-common-3.1.3.jar!/hive-log4j2.properties Async: true</span><br><span class="line">Hive-on-MR is deprecated in Hive 2 and may not be available in the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">Hive Session ID = 195fb209-4ef9-4452-bbdd-90b81a8d04bc</span><br><span class="line"><span class="meta prompt_">hive&gt;</span></span><br></pre></td></tr></table></figure><p><strong>4．子任务四：Flume 安装配置</strong> </p><p>（1）从宿主机&#x2F;root 目录下将文件 apache-flume-1.11.0-bin.tar.gz复制到容器node03中的&#x2F;root&#x2F;software路径中（若路径不存在，则需新建），将 node03 节点 Flume安装包解压到&#x2F;root&#x2F;software 目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# tar -zxvf /opt/software/apache-flume-1.11.0-bin.tar.gz -C /root/software/</span><br></pre></td></tr></table></figure><p>（2）完善相关配置，配置 Flume 环境变量，并使环境变量生效，执行命令 flume-ng version。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# vi /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">新增</span></span><br><span class="line">export FLUME_HOME_HOME=/root/software/flume</span><br><span class="line">export PATH=$PATH:$FLUME_HOME/bin</span><br><span class="line">[root@master software]# source /etc/profile</span><br><span class="line"></span><br><span class="line">[root@master software]# flume-ng version</span><br><span class="line">Flume 1.11.0</span><br><span class="line">Source code repository: https://git.apache.org/repos/asf/flume.git</span><br><span class="line">Revision: 1a15927e594fd0d05a59d804b90a9c31ec93f5e1</span><br><span class="line">Compiled by rgoers on Sun Oct 16 14:44:15 MST 2022</span><br><span class="line">From source with checksum bbbca682177262aac3a89defde369a37</span><br></pre></td></tr></table></figure><h3 id="（二）任务二：数据库配置维护"><a href="#（二）任务二：数据库配置维护" class="headerlink" title="（二）任务二：数据库配置维护"></a><strong>（二）任务二：数据库配置维护</strong></h3><h4 id="1．子任务一：数据库配置"><a href="#1．子任务一：数据库配置" class="headerlink" title="1．子任务一：数据库配置"></a><strong>1．子任务一：数据库配置</strong></h4><p>（1）在主机 node3 上安装 mysql-community-server，启动 mySQL 服务，根据临时密码进入数据库，并修改本地密码为“123456”；</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@master</span> software]# rpm <span class="operator">-</span>ivh mysql<span class="operator">-</span>community<span class="operator">-</span>server<span class="number">-5.7</span><span class="number">.44</span><span class="number">-1.</span>el7.x86_64.rpm </span><br><span class="line">警告：mysql<span class="operator">-</span>community<span class="operator">-</span>server<span class="number">-5.7</span><span class="number">.44</span><span class="number">-1.</span>el7.x86_64.rpm: 头V4 RSA<span class="operator">/</span>SHA256 Signature, 密钥 ID <span class="number">3</span>a79bd29: NOKEY</span><br><span class="line">准备中...                          ################################# [<span class="number">100</span><span class="operator">%</span>]</span><br><span class="line">正在升级<span class="operator">/</span>安装...</span><br><span class="line">   <span class="number">1</span>:mysql<span class="operator">-</span>community<span class="operator">-</span>server<span class="number">-5.7</span><span class="number">.44</span><span class="number">-1.</span>e################################# [<span class="number">100</span><span class="operator">%</span>]</span><br><span class="line">[root<span class="variable">@master</span> software]# systemctl <span class="keyword">start</span> mysqld</span><br><span class="line">[root<span class="variable">@master</span> software]# mysql <span class="operator">-</span>uroot <span class="operator">-</span>p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome <span class="keyword">to</span> the MySQL monitor.  Commands <span class="keyword">end</span> <span class="keyword">with</span> ; <span class="keyword">or</span> \g.</span><br><span class="line">Your MySQL connection id <span class="keyword">is</span> <span class="number">2</span></span><br><span class="line">Server version: <span class="number">5.7</span><span class="number">.44</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2023</span>, Oracle <span class="keyword">and</span><span class="operator">/</span><span class="keyword">or</span> its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle <span class="keyword">is</span> a registered trademark <span class="keyword">of</span> Oracle Corporation <span class="keyword">and</span><span class="operator">/</span><span class="keyword">or</span> its</span><br><span class="line">affiliates. Other names may be trademarks <span class="keyword">of</span> their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. Type <span class="string">&#x27;\c&#x27;</span> <span class="keyword">to</span> clear the <span class="keyword">current</span> input statement.</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><p>（2）开启 MySQL 远程连接权限，所有 root 用户都可以使用 123456 进行登录连接。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">bind<span class="operator">-</span>address<span class="operator">=</span><span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> mysql.user <span class="keyword">set</span> host<span class="operator">=</span><span class="string">&#x27;%&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;mysql.sys&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure><p><strong>2．子任务二：导入相关表</strong> </p><p>（1）将本地&#x2F;root&#x2F;eduhq&#x2F;equipment&#x2F;目录下的数据文件 root_sl_src.sql 导入 MySQL 对应数据库 root_sl_src；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">use root_sl_src</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash"><span class="built_in">source</span> root_sl_src.sql</span></span><br></pre></td></tr></table></figure><p>（2）将本地&#x2F;root&#x2F;eduhq&#x2F;equipment&#x2F;目录下的数据文件 root_sl_ugoogds_src.sql 导 入 MySQL 对应数据库root_sl_ugoogds_src。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> use root_sl_ugoogds_src</span><br><span class="line">mysql<span class="operator">&gt;</span> source root_sl_ugoogds_src.sql</span><br></pre></td></tr></table></figure><p><strong>3．子任务三：维护数据表</strong> </p><p>结合已导入的两份 sql 数据，对其中的数据进行如下查询和操作。</p><p>（1）对‘root_sl_src’数据库中的‘province’数据表进行修改，修改字段 province_id 为 24 的记录的province_name，修改为‘内蒙古自治区’；</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> province <span class="keyword">set</span> province_name<span class="operator">=</span><span class="string">&#x27;内蒙古自治区&#x27;</span> <span class="keyword">where</span> province_id<span class="operator">=</span><span class="number">24</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure><p>（2）对‘root_sl_src’数据库中的‘city’数据表进行删除，删除字段 city_id 为 142 的记录。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">delete</span> <span class="keyword">from</span> city <span class="keyword">where</span> city_id<span class="operator">=</span><span class="number">142</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;模块一：平台搭建与运维&quot;&gt;&lt;a href=&quot;#模块一：平台搭建与运维&quot; class=&quot;headerlink&quot; title=&quot;模块一：平台搭建与运维&quot;&gt;&lt;/a&gt;模块一：平台搭建与运维&lt;/h2&gt;&lt;h3 id=&quot;（一）任务一：大数据平台搭建&quot;&gt;&lt;a href=&quot;#（一）</summary>
      
    
    
    
    <category term="国赛赛题" scheme="https://bigdata-yx.github.io/categories/%E5%9B%BD%E8%B5%9B%E8%B5%9B%E9%A2%98/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>(第一套)ZZ052大数据应用与服务赛项赛题</title>
    <link href="https://bigdata-yx.github.io/posts/b2b6.html"/>
    <id>https://bigdata-yx.github.io/posts/b2b6.html</id>
    <published>2024-10-28T03:38:03.000Z</published>
    <updated>2024-10-28T03:38:03.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="模块一：平台搭建与运维"><a href="#模块一：平台搭建与运维" class="headerlink" title="模块一：平台搭建与运维"></a>模块一：平台搭建与运维</h2><p><strong>（一）任务一：大数据平台搭建</strong> </p><p>本模块需要使用 root 用户完成相关配置；所有组件均</p><p>在&#x2F;root&#x2F;software 目录下。</p><h2 id="前置准备"><a href="#前置准备" class="headerlink" title="前置准备"></a>前置准备</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">三台机都要</span></span><br><span class="line">[root@localhost ~]# systemctl stop firewalld</span><br><span class="line">[root@localhost ~]# systemctl disable firewalld</span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.</span><br><span class="line">Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# vi /etc/hosts</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">追加：</span></span><br><span class="line">192.168.1.122 master</span><br><span class="line">192.168.1.123 slave1</span><br><span class="line">192.168.1.124 slave2</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ssh-keygen# 一直回车即可</span><br><span class="line">[root@localhost ~]# ssh-copy-id master# yes 然后密码</span><br><span class="line">[root@localhost ~]# ssh-copy-id slave1</span><br><span class="line">[root@localhost ~]# ssh-copy-id slave2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">改主机名</span></span><br><span class="line">[root@localhost software]# hostnamectl set-hostname master# 以此类推第二台slave1第三台slave2</span><br></pre></td></tr></table></figure><p><strong>1．子任务一：基础环境准备</strong> </p><p>master、slave1、slave2三台节点都需要安装JDK</p><p>（1） 将JDK安装包解压到&#x2F;root&#x2F;software目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost software]# tar -zxvf /opt/software/jdk-8u391-linux-x64.tar.gz -C /root/software/</span><br><span class="line">[root@localhost software]# cd /root/software/</span><br><span class="line">[root@localhost software]# mv jdk1.8.0_391/ jdk</span><br></pre></td></tr></table></figure><p>（2） 在“&#x2F;etc&#x2F;profile”文件中配置JDK环境变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost software]# vi /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">追加</span></span><br><span class="line">export JAVA_HOME=/root/software/jdk</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">[root@localhost software]# source /etc/profile</span><br></pre></td></tr></table></figure><p>JAVA_HOME和PATH的值，并让配置文件立即生效；</p><p>（3） 查看JDK版本，检测JDK是否安装成功。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost software]# java -version</span><br><span class="line">java version &quot;1.8.0_391&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_391-b13)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.391-b13, mixed mode)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">记得分发jdk给slave1和slave2</span></span><br><span class="line">[root@master software]# scp -r jdk/ slave1:`pwd`</span><br><span class="line">[root@master software]# scp -r jdk/ slave2:`pwd`</span><br></pre></td></tr></table></figure><p>在master节点操作</p><p>（1） 在master上生成SSH密钥对；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">前置工作已做</span><br></pre></td></tr></table></figure><p>（2） 将master上的公钥拷贝到slave1和slave2上；在 master 上通过 SSH 连接 slave1 和 slave2 来验证。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost software]# ssh slave1</span><br><span class="line">Last login: Mon Oct 28 11:43:50 2024 from 192.168.1.166</span><br><span class="line">[root@slave1 ~]# exit;</span><br><span class="line">登出</span><br><span class="line">Connection to slave1 closed.</span><br><span class="line">[root@localhost software]# ssh slave1</span><br><span class="line">Last login: Mon Oct 28 11:58:39 2024 from master</span><br><span class="line">[root@slave1 ~]# exit</span><br><span class="line">登出</span><br><span class="line">Connection to slave1 closed.</span><br><span class="line">[root@localhost software]# ssh slave2</span><br><span class="line">Last login: Mon Oct 28 11:43:52 2024 from 192.168.1.166</span><br><span class="line">[root@slave2 ~]# exit</span><br><span class="line">登出</span><br><span class="line">Connection to slave2 closed.</span><br></pre></td></tr></table></figure><p><strong>2．子任务二：Hadoop 完全分布式安装配置</strong> </p><p>master、slave1、slave2三台节点都需要安装Hadoop</p><p>（1） 在 主 节 点 将 Hadoop 安 装 包 解 压 到&#x2F;root&#x2F;software目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /opt/software/hadoop-3.3.6.tar.gz -C /root/software/</span><br></pre></td></tr></table></figure><p>（2） 依次配置hadoop-env.sh、core-site.xml、hdfs-site.xml、mapred-site.xml、yarn-site.xml和workers配置</p><p>文件；Hadoop集群部署规划如下表；</p><p>表1    Hadoop集群部署规划</p><p><img src="https://pic.imgdb.cn/item/6721a0cdd29ded1a8cdcb200.png"></p><p>（3） 在master节点的Hadoop安装目录下依次创建hadoopDatas&#x2F;tempDatas 、 hadoopDatas&#x2F;namenodeDatas 、hadoopDatas&#x2F;datanodeDatas、hadoopDatas&#x2F;dfs&#x2F;nn&#x2F;edits、hadoopDatas&#x2F;dfs&#x2F;snn&#x2F;name 和hadoopDatas&#x2F;dfs&#x2F;nn&#x2F;snn&#x2F;edits目录；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost hadoop]# mkdir -p hadoopDatas/tempDatas</span><br><span class="line">[root@localhost hadoop]# mkdir hadoopDatas/namenodeDatas </span><br><span class="line">[root@localhost hadoop]# mkdir hadoopDatas/datanodeDatas</span><br><span class="line">[root@localhost hadoop]# mkdir hadoopDatas/dfs/nn/edits</span><br><span class="line">[root@localhost hadoop]# mkdir -p hadoopDatas/dfs/nn/edits</span><br><span class="line">[root@localhost hadoop]# mkdir -p hadoopDatas/dfs/snn/name</span><br><span class="line">[root@localhost hadoop]# mkdir -p hadoopDatas/dfs/nn/snn/edits</span><br></pre></td></tr></table></figure><p>（4） 在master节点上使用scp命令将配置完的Hadoop安装目录直接拷贝至slave1和slave2；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /root/software/hadoop/ slave1:`pwd`</span><br><span class="line">scp -r /root/software/hadoop/ slave2:`pwd`</span><br></pre></td></tr></table></figure><p>（5） 三台节点的“&#x2F;etc&#x2F;profile”文件中配置Hadoop环境变量HADOOP_HOME和PATH的值，并让配置文件立即生效；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# scp /etc/profile slave1:/etc</span><br><span class="line">profile                                                        100% 1985     3.4MB/s   00:00    </span><br><span class="line">[root@master software]# scp /etc/profile slave2:/etc</span><br><span class="line">profile                                                        100% 1985     3.4MB/s   00:00</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">slave1</span></span><br><span class="line">[root@slave1 ~]# source /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">slave2</span></span><br><span class="line">[root@slave2 ~]# source /etc/profile</span><br></pre></td></tr></table></figure><p>（6） 在主节点格式化集群；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# hadoop namenode -format</span><br></pre></td></tr></table></figure><p>（7） 在主节点依次启动HDFS、YARN集群和历史服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@master /]# start-all.sh</span><br><span class="line">Starting namenodes on [master]</span><br><span class="line">上一次登录：一 10月 28 16:05:13 CST 2024pts/0 上</span><br><span class="line">Starting datanodes</span><br><span class="line">上一次登录：一 10月 28 16:05:25 CST 2024pts/0 上</span><br><span class="line">Starting secondary namenodes [master]</span><br><span class="line">上一次登录：一 10月 28 16:05:27 CST 2024pts/0 上</span><br><span class="line">Starting resourcemanager</span><br><span class="line">上一次登录：一 10月 28 16:05:33 CST 2024pts/0 上</span><br><span class="line">Starting nodemanagers</span><br><span class="line">上一次登录：一 10月 28 16:05:40 CST 2024pts/0 上</span><br><span class="line">上一次登录：一 10月 28 16:05:42 CST 2024pts/0 上</span><br><span class="line">[root@master /]# mapred --daemon start historyserver</span><br><span class="line">[root@master /]# jps</span><br><span class="line">70417 WebAppProxyServer</span><br><span class="line">68435 NameNode</span><br><span class="line">71267 JobHistoryServer</span><br><span class="line">69218 SecondaryNameNode</span><br><span class="line">71385 Jps</span><br><span class="line">69560 ResourceManager</span><br><span class="line">69816 NodeManager</span><br><span class="line">68718 DataNode</span><br></pre></td></tr></table></figure><p><strong>3．子任务三：MySQL 安装配置</strong> </p><p>只在master节点操作</p><p>（1） 将MySQL 5.7.25安装包解压到&#x2F;root&#x2F;software目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# tar -xvf /opt/software/mysql-5.7.44-1.el7.x86_64.rpm-bundle.tar -C /root/software/</span><br><span class="line">mysql-community-client-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-common-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-devel-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-embedded-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-embedded-compat-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-embedded-devel-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-libs-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-libs-compat-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-server-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-test-5.7.44-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><p>（2） 使 用 rpm -ivh 依 次 安 装 mysql-community-common、mysql-community- libs、mysql-community-libscompat 、 mysql-community-client 和 mysql-communityserver包；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# rpm -ivh mysql-community-common-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">[root@master software]# rpm -ivh mysql-community-libs-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">[root@master software]# rpm -ivh mysql-community-libs-compat-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">[root@master software]# rpm -ivh mysql-community-client-5.7.44-1.el7.x86_64.rpm</span><br><span class="line">[root@master software]# rpm -ivh mysql-community-server-5.7.44-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><p>（3） 安装好MySQL后，使用mysql用户初始化和启动数据库；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# mysqld --initialize-insecure --user=mysql --datadir=/var/lib/mysql</span><br><span class="line">[root@master software]# systemctl start mysqld</span><br></pre></td></tr></table></figure><p>（4） 使用root用户无密码登录MySQL，然后将root用户的密码修改为123456，修改完成退出MySQL，重新登录验证密码是否修改成功；更改“mysql”数据库里的 user 表里的 host 项，从localhost 改成%即可实现用户远程登录；设置完成刷新配置信息，让其生效。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@master</span> software]# mysql <span class="operator">-</span>uroot <span class="operator">-</span>p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome <span class="keyword">to</span> the MySQL monitor.  Commands <span class="keyword">end</span> <span class="keyword">with</span> ; <span class="keyword">or</span> \g.</span><br><span class="line">Your MySQL connection id <span class="keyword">is</span> <span class="number">3</span></span><br><span class="line">Server version: <span class="number">5.7</span><span class="number">.44</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2023</span>, Oracle <span class="keyword">and</span><span class="operator">/</span><span class="keyword">or</span> its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle <span class="keyword">is</span> a registered trademark <span class="keyword">of</span> Oracle Corporation <span class="keyword">and</span><span class="operator">/</span><span class="keyword">or</span> its</span><br><span class="line">affiliates. Other names may be trademarks <span class="keyword">of</span> their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. Type <span class="string">&#x27;\c&#x27;</span> <span class="keyword">to</span> clear the <span class="keyword">current</span> input statement.</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> exit;</span><br><span class="line">Bye</span><br><span class="line">[root<span class="variable">@master</span> software]# mysql <span class="operator">-</span>uroot <span class="operator">-</span>p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome <span class="keyword">to</span> the MySQL monitor.  Commands <span class="keyword">end</span> <span class="keyword">with</span> ; <span class="keyword">or</span> \g.</span><br><span class="line">Your MySQL connection id <span class="keyword">is</span> <span class="number">4</span></span><br><span class="line">Server version: <span class="number">5.7</span><span class="number">.44</span> MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2023</span>, Oracle <span class="keyword">and</span><span class="operator">/</span><span class="keyword">or</span> its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle <span class="keyword">is</span> a registered trademark <span class="keyword">of</span> Oracle Corporation <span class="keyword">and</span><span class="operator">/</span><span class="keyword">or</span> its</span><br><span class="line">affiliates. Other names may be trademarks <span class="keyword">of</span> their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. Type <span class="string">&#x27;\c&#x27;</span> <span class="keyword">to</span> clear the <span class="keyword">current</span> input statement.</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">user</span>,host <span class="keyword">from</span> mysql.user;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">user</span>          <span class="operator">|</span> host      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> mysql.session <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql.sys     <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> root          <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-----------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> mysql.user <span class="keyword">set</span> host<span class="operator">=</span><span class="string">&#x27;%&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> mysql.user <span class="keyword">set</span> host<span class="operator">=</span><span class="string">&#x27;%&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;mysql.sys&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> mysql.user <span class="keyword">set</span> host<span class="operator">=</span><span class="string">&#x27;%&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;mysql.session&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> flush privileges;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p><strong>4．子任务四：Hive 安装配置</strong> </p><p>只在master节点操作。</p><p>（1） 将Hive 3.1.2的安装包解压到&#x2F;root&#x2F;software目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# tar -zxvf /opt/software/apache-hive-3.1.3-bin.tar.gz -C /root/software/</span><br></pre></td></tr></table></figure><p>（2） 在“&#x2F;etc&#x2F;profile”文件中配置Hive环境变量HIVE_HOME和PATH的值，并让配置文件立即生效；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# cd /root/software/</span><br><span class="line">[root@master software]# mv apache-hive-3.1.3-bin/ hive</span><br><span class="line">[root@master software]# vi /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">追加</span></span><br><span class="line">export HIVE_HOME=/root/software/hive</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br><span class="line">[root@master software]# source /etc/profile</span><br></pre></td></tr></table></figure><p>（3） 查看Hive版本，检测Hive环境变量是否设置成功；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# hive --version</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hive/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding in [jar:file:/root/software/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span><br><span class="line">SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">Hive 3.1.3</span><br><span class="line">Git git://MacBook-Pro.fios-router.home/Users/ngangam/commit/hive -r 4df4d75bf1e16fe0af75aad0b4179c34c07fc975</span><br><span class="line">Compiled by ngangam on Sun Apr 3 16:58:16 EDT 2022</span><br><span class="line">From source with checksum 5da234766db5dfbe3e92926c9bbab2af</span><br></pre></td></tr></table></figure><p>（4） 切换到 $HIVE_HOME&#x2F;conf 目录下，将 hiveenv.sh.template文件复制一份并重命名为hive-env.sh；然后，使用vim编辑器进行编辑，在文件中配置HADOOP_HOME、HIVE_CONF_DIR以及HIVE_AUX_JARS_PATH参数的值，将原有值删除并将前面的注释符#去掉；配置完成，保存退出；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# cp hive-env.sh.template hive-env.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置这些值</span></span><br><span class="line">HADOOP_HOME=/root/software/hadoop</span><br><span class="line">export HIVE_CONF_DIR=/root/software/hive</span><br><span class="line">export HIVE_AUX_JARS_PATH=/root/software/hive/lib</span><br></pre></td></tr></table></figure><p>（5） 将 &#x2F;root&#x2F;software 目 录 下 的 MySQL 驱动包mysql-connector-java-5.1.47-bin.jar 拷 贝 到$HIVE_HOME&#x2F;lib目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# cp /opt/software/mysql-connector-java-5.1.34.jar /root/software/hive/lib/</span><br></pre></td></tr></table></figure><p>（6） 在$HIVE_HOME&#x2F;conf目录下创建一个名为hive-site.xml的文件，并使用vim编辑器进行编辑；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# vi hive-site.xml</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">然后进行配置</span></span><br></pre></td></tr></table></figure><p>配置如下内容：</p><p><img src="https://pic.imgdb.cn/item/6721a102d29ded1a8cdd10d5.png"></p><p>（7） 使用schematool命令，通过指定元数据库类型为“mysql”，来初始化源数据库的元数据；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# schematool -initSchema -dbType mysql</span><br></pre></td></tr></table></figure><p>（8） 使用CLI启动Hive，进入Hive客户端；在Hive默认数据库下创建一个名为student的管理表；</p><p><img src="https://pic.imgdb.cn/item/6721a127d29ded1a8cdd5fdd.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# hive</span><br><span class="line">hive&gt; create table student(</span><br><span class="line">    &gt; id int,</span><br><span class="line">    &gt; name string);</span><br><span class="line">OK</span><br><span class="line">Time taken: 1.73 seconds</span><br></pre></td></tr></table></figure><p>（9） 通过insert语句往student表中插入一条测试数据。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; insert into table student values(1, &#x27;hkj&#x27;);</span><br></pre></td></tr></table></figure><p><strong>5．子任务五：Flume 安装配置</strong> </p><p>只在 master 节点操作。</p><p>（1） 将 Flume 1.11.0 的安装包解压到&#x2F;root&#x2F;software目录下；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# tar -zxvf /opt/software/apache-flume-1.11.0-bin.tar.gz -C /root/software/</span><br></pre></td></tr></table></figure><p>（2） 在“&#x2F;etc&#x2F;profile”文件中配置Flume环境变量FLUME_HOME和PATH的值，并让配置文件立即生效；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master software]# cd /root/software/</span><br><span class="line">[root@master software]# mv apache-flume-1.11.0-bin/ flume</span><br><span class="line">[root@master software]# vi /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">追加</span></span><br><span class="line">export FLUME_HOME=/root/software/flume</span><br><span class="line">export PATH=$PATH:$FLUME_HOME/bin</span><br><span class="line">[root@master software]# source /etc/profile</span><br></pre></td></tr></table></figure><p>（3） 使 用 cd 命 令 进 入 &#x2F;root&#x2F;software&#x2F;apache&#x2F;flume-1.11.0-bin&#x2F;conf 目 录 下 ， 使 用 cp 命令将 flumeenv.sh.template文件复制一份，并重命名为flume-env.sh；使 用 vim 命 令 打 开 “flume-env.sh” 配 置 文 件 ， 找 到JAVA_HOME参数位置，将前面的“#”去掉，将值修改为本机JDK的实际位置；修改完成，保存退出；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# cd /root/software/flume/conf/</span><br><span class="line">[root@master conf]# cp flume-env.sh.template flume-env.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将java_home配置项的<span class="comment">#去掉然后更换地址</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例：<span class="built_in">export</span> JAVA_HOME=/root/software/jdk</span></span><br></pre></td></tr></table></figure><p>（4） 查看Flume版本，检测Flume是否安装成功。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# flume-ng version</span><br><span class="line">Flume 1.11.0</span><br><span class="line">Source code repository: https://git.apache.org/repos/asf/flume.git</span><br><span class="line">Revision: 1a15927e594fd0d05a59d804b90a9c31ec93f5e1</span><br><span class="line">Compiled by rgoers on Sun Oct 16 14:44:15 MST 2022</span><br><span class="line">From source with checksum bbbca682177262aac3a89defde369a37</span><br></pre></td></tr></table></figure><p><strong>（二）任务二：数据库配置维护</strong> </p><p><strong>1．子任务一：数据库配置</strong> </p><p>在 Hive 中创建一个名为 comm 的数据库，如果数据库已经存在，则不进行创建。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]# hive</span><br><span class="line">hive&gt; create database if not exist comm;</span><br><span class="line">FAILED: ParseException line 1:23 missing KW_EXISTS at &#x27;exist&#x27; near &#x27;&lt;EOF&gt;&#x27;</span><br><span class="line">line 1:29 extraneous input &#x27;comm&#x27; expecting EOF near &#x27;&lt;EOF&gt;&#x27;</span><br><span class="line">hive&gt; create database if not exists comm;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.297 seconds</span><br></pre></td></tr></table></figure><p><strong>2．子任务二：创建相关表</strong> </p><p>（1） 在 comm 数 据 库 下 创 建 一 个 名 为ods_behavior_log的外部表，如果表已存在，则先删除；分区字段为dt，即根据日期进行分区；同时，使用location关键 字 将 表 的 存 储 路 径 设 置 为 HDFS 的&#x2F;behavior&#x2F;ods&#x2F;ods_behavior_log目录；字段类型如下表所示；</p><p><img src="https://pic.imgdb.cn/item/6721a147d29ded1a8cddbd2e.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; use comm;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.042 seconds</span><br><span class="line">hive&gt; CREATE TABLE IF NOT EXISTS ods_behavior_log (</span><br><span class="line">    &gt;   line STRING</span><br><span class="line">    &gt; )</span><br><span class="line">    &gt; PARTITIONED BY (dt STRING)</span><br><span class="line">    &gt; ROW FORMAT DELIMITED</span><br><span class="line">    &gt; FIELDS TERMINATED BY &#x27;\t&#x27;</span><br><span class="line">    &gt; STORED AS TEXTFILE;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.244 seconds</span><br></pre></td></tr></table></figure><p>（2） 使 用 load data 子 句 将 本 地&#x2F;root&#x2F;eduhq&#x2F;data&#x2F;app_log&#x2F;behavior目录下的每个数据文件依次加载到外部表ods_behavior_log的对应分区中，按照日志文件对应日期定义静态分区（例如：dt&#x3D;’2023-01-01’）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/excel_log/behavior2023-01-01.xlsx&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-01&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 1.831 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/excel_log/behavior2023-01-02.xlsx&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-02&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.628 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/excel_log/behavior2023-01-03.xlsx&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-03&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.491 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/excel_log/behavior2023-01-04.xlsx&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-04&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.506 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/excel_log/behavior2023-01-05.xlsx&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-05&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.465 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/excel_log/behavior2023-01-06.xlsx&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-06&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.44 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/excel_log/behavior2023-01-07.xlsx&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-07&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.423 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/txt_log/behavior2023-01-01.log&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-01&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.432 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/txt_log/behavior2023-01-02.log&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-02&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.397 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/txt_log/behavior2023-01-03.log&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-03&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.425 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/txt_log/behavior2023-01-04.log&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-04&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.43 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/txt_log/behavior2023-01-05.log&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-05&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.395 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/txt_log/behavior2023-01-06.log&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-06&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.422 seconds</span><br><span class="line">hive&gt; LOAD DATA LOCAL INPATH &#x27;/root/eduhq/data/app_log/behavior/txt_log/behavior2023-01-07.log&#x27; INTO TABLE ods_behavior_log PARTITION (dt=&#x27;2023-01-07&#x27;);</span><br><span class="line">Loading data to table comm.ods_behavior_log partition (dt=2023-01-01)</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.773 seconds</span><br></pre></td></tr></table></figure><p>（3） 查看ods_behavior_log表的所有现有分区、前3行数据，并统计外部表ods_behavior_log数据总行数；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"># 查看所有现有分区</span><br><span class="line">hive&gt; SHOW PARTITIONS ods_behavior_log;</span><br><span class="line">OK</span><br><span class="line">dt=2023-01-01</span><br><span class="line">dt=2023-01-02</span><br><span class="line">dt=2023-01-03</span><br><span class="line">dt=2023-01-04</span><br><span class="line">dt=2023-01-05</span><br><span class="line">dt=2023-01-06</span><br><span class="line">dt=2023-01-07</span><br><span class="line">Time taken: 0.089 seconds, Fetched: 7 row(s)</span><br><span class="line"></span><br><span class="line"># 前三行数据</span><br><span class="line">hive&gt; SELECT * FROM ods_behavior_log LIMIT 3;</span><br><span class="line">OK</span><br><span class="line">&#123;&quot;client_ip&quot;: &quot;222.86.237.202&quot;, &quot;device_type&quot;: &quot;pc&quot;, &quot;time&quot;: 1672580908000, &quot;type&quot;: &quot;WIFI&quot;, &quot;device&quot;: &quot;357c5dd65e834b8bafac861bdae5d76d&quot;, &quot;url&quot;: &quot;http://wan.baidu.com/home?idfrom=4087&quot;&#125;        2023-01-01</span><br><span class="line">&#123;&quot;client_ip&quot;: &quot;210.42.113.5&quot;, &quot;device_type&quot;: &quot;pc&quot;, &quot;time&quot;: 1672539082000, &quot;type&quot;: &quot;WIFI&quot;, &quot;device&quot;: &quot;6cab446d0c664de4b09c76bae90fc1bf&quot;, &quot;url&quot;: &quot;http://go.hao123.com/sites&quot;&#125;     2023-01-01</span><br><span class="line">&#123;&quot;client_ip&quot;: &quot;222.34.42.67&quot;, &quot;device_type&quot;: &quot;mobile&quot;, &quot;time&quot;: 1672524854000, &quot;type&quot;: &quot;5G&quot;, &quot;device&quot;: &quot;36b4213510e74c7e8455b61fb481b576&quot;, &quot;url&quot;: &quot;https://4366yy.381pk.com/1251/&quot;&#125;       2023-01-01</span><br><span class="line">Time taken: 1.805 seconds, Fetched: 3 row(s)</span><br><span class="line"></span><br><span class="line"># 统计数据总行数</span><br><span class="line">hive&gt; SELECT COUNT(*) FROM ods_behavior_log;</span><br><span class="line">Query ID = root_20241028190258_2de0fddd-343e-4256-b248-f252f3400a9b</span><br><span class="line">Total jobs = 1</span><br><span class="line">Launching Job 1 out of 1</span><br><span class="line">Number of reduce tasks determined at compile time: 1</span><br><span class="line">In order to change the average load for a reducer (in bytes):</span><br><span class="line">  set hive.exec.reducers.bytes.per.reducer=&lt;number&gt;</span><br><span class="line">In order to limit the maximum number of reducers:</span><br><span class="line">  set hive.exec.reducers.max=&lt;number&gt;</span><br><span class="line">In order to set a constant number of reducers:</span><br><span class="line">  set mapreduce.job.reduces=&lt;number&gt;</span><br><span class="line">Starting Job = job_1730102747884_0003, Tracking URL = http://master:8089/proxy/application_1730102747884_0003/</span><br><span class="line">Kill Command = /root/software/hadoop/bin/mapred job  -kill job_1730102747884_0003</span><br><span class="line">Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1</span><br><span class="line">2024-10-28 19:03:31,071 Stage-1 map = 0%,  reduce = 0%</span><br><span class="line">2024-10-28 19:03:42,782 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.55 sec</span><br><span class="line">2024-10-28 19:04:43,115 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.55 sec</span><br><span class="line">2024-10-28 19:05:43,251 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.55 sec</span><br><span class="line">2024-10-28 19:06:44,246 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.55 sec</span><br><span class="line">2024-10-28 19:06:53,529 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 4.32 sec</span><br><span class="line">MapReduce Total cumulative CPU time: 4 seconds 320 msec</span><br><span class="line">Ended Job = job_1730102747884_0003</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-Stage-1: Map: 1  Reduce: 1   Cumulative CPU: 4.32 sec   HDFS Read: 37824491 HDFS Write: 106 SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: 4 seconds 320 msec</span><br><span class="line">OK</span><br><span class="line">198413</span><br><span class="line">Time taken: 235.981 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure><p>（4） 在 comm 数 据 库 下 创 建 一 个 名 为dwd_behavior_log的外部表，如果表已存在，则先删除；分区字段为dt，即根据日期进行分区；另外，要求指定表的存储路径为HDFS的&#x2F;behavior&#x2F;dwd&#x2F;dwd_behavior_log目录，存储文件类型为“orc”，文件的压缩类型为“snappy”；字段类型如下表所示；</p><p><img src="https://pic.imgdb.cn/item/6721a16ad29ded1a8cde1313.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; CREATE EXTERNAL TABLE IF NOT EXISTS comm.dwd_behavior_log (</span><br><span class="line">    &gt;   client_ip STRING,</span><br><span class="line">    &gt;   device_type STRING,</span><br><span class="line">    &gt;   type STRING,</span><br><span class="line">    &gt;   device STRING,</span><br><span class="line">    &gt;   url STRING,</span><br><span class="line">    &gt;   province STRING,</span><br><span class="line">    &gt;   city STRING,</span><br><span class="line">    &gt;   ts BIGINT</span><br><span class="line">    &gt; )</span><br><span class="line">    &gt; PARTITIONED BY (dt STRING)</span><br><span class="line">    &gt; STORED AS ORC</span><br><span class="line">    &gt; LOCATION &#x27;/behavior/dwd/dwd_behavior_log&#x27;</span><br><span class="line">    &gt; TBLPROPERTIES (&quot;orc.compress&quot;=&quot;SNAPPY&quot;);</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.091 seconds</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;模块一：平台搭建与运维&quot;&gt;&lt;a href=&quot;#模块一：平台搭建与运维&quot; class=&quot;headerlink&quot; title=&quot;模块一：平台搭建与运维&quot;&gt;&lt;/a&gt;模块一：平台搭建与运维&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;（一）任务一：大数据平台搭建&lt;/strong&gt; &lt;/</summary>
      
    
    
    
    <category term="国赛赛题" scheme="https://bigdata-yx.github.io/categories/%E5%9B%BD%E8%B5%9B%E8%B5%9B%E9%A2%98/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker-dockerfile</title>
    <link href="https://bigdata-yx.github.io/posts/d3ce.html"/>
    <id>https://bigdata-yx.github.io/posts/d3ce.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>404</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;404&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker-compose</title>
    <link href="https://bigdata-yx.github.io/posts/713b.html"/>
    <id>https://bigdata-yx.github.io/posts/713b.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li>首先需要compose,yaml文件</li><li>上线：docker compose up -d</li><li>下线：docker compse down </li><li>启动：docker compose start x1 x2 x3</li><li>停止：docker compose stop x1 x3</li><li>扩容：docker compose scale x2&#x3D;3</li></ul><h4 id="compose-yaml例子："><a href="#compose-yaml例子：" class="headerlink" title="compose.yaml例子："></a>compose.yaml例子：</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">name: myblog</span><br><span class="line">services:</span><br><span class="line">  mysql:</span><br><span class="line">    container_name: mysql</span><br><span class="line">    image: mysql:<span class="number">8.0</span></span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: <span class="string">&quot;123456&quot;</span></span><br><span class="line">      MYSQL_DATABASE: wordpress</span><br><span class="line">    volumes:</span><br><span class="line">      - mysql-data:/var/lib/mysql</span><br><span class="line">      - ./myconf:/etc/mysql/conf.d </span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      - blog</span><br><span class="line"></span><br><span class="line">  wordpress:</span><br><span class="line">    image: wordpress</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;8080:80&quot;</span></span><br><span class="line">    environment: </span><br><span class="line">      WORDPRESS_DB_HOST: mysql</span><br><span class="line">      WORDPRESS_DB_USER: root</span><br><span class="line">      WORDPRESS_DB_PASSWORD: <span class="string">&quot;123456&quot;</span> </span><br><span class="line">      WORDPRESS_DB_NAME: wordpress </span><br><span class="line">    volumes:</span><br><span class="line">      - wordpress:/var/www/html</span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      - blog</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  mysql-data:</span><br><span class="line">  wordpress:</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  blog:</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;首先需要compose,yaml文件&lt;/li&gt;
&lt;li&gt;上线：docker compose up -d&lt;/li&gt;
&lt;li&gt;下线：docker compse down &lt;/li&gt;
&lt;li&gt;启动：docker compose start x1 x2 x3&lt;/li&gt;
</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker安装</title>
    <link href="https://bigdata-yx.github.io/posts/1fef.html"/>
    <id>https://bigdata-yx.github.io/posts/1fef.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="先移除旧版的docker如果没有就跳过"><a href="#先移除旧版的docker如果没有就跳过" class="headerlink" title="先移除旧版的docker如果没有就跳过"></a>先移除旧版的docker如果没有就跳过</h3><ul><li>移除旧版本docker \</li><li>sudo yum remove docker \</li><li>docker-client \</li><li>docker-client-latest \</li><li>docker-common \</li><li>docker-latest \</li><li>docker-latest-logrotate \</li><li>docker-logrotate \</li><li>docker-engine</li></ul><h3 id="配置docker-yum源"><a href="#配置docker-yum源" class="headerlink" title="配置docker yum源"></a>配置docker yum源</h3><ul><li>sudo yum install -y yum-utils</li><li>sudo yum-config-manager </li><li>–add-repo </li><li><a href="http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</a></li><li>如果已经配置好yum为阿里云的就不用了</li></ul><h2 id="安装-最新-docker"><a href="#安装-最新-docker" class="headerlink" title="安装 最新 docker"></a>安装 最新 docker</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><h2 id="启动-amp-开机启动docker；-enable-start-二合一"><a href="#启动-amp-开机启动docker；-enable-start-二合一" class="headerlink" title="启动&amp; 开机启动docker； enable + start 二合一"></a>启动&amp; 开机启动docker； enable + start 二合一</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable docker --now</span><br></pre></td></tr></table></figure><h3 id="配置加速"><a href="#配置加速" class="headerlink" title="配置加速"></a>配置加速</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors那地址</span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">&quot;registry-mirrors&quot;: [&quot;https://82m9ar63.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"></span><br><span class="line">这个加速不太行使用另外一个</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;先移除旧版的docker如果没有就跳过&quot;&gt;&lt;a href=&quot;#先移除旧版的docker如果没有就跳过&quot; class=&quot;headerlink&quot; title=&quot;先移除旧版的docker如果没有就跳过&quot;&gt;&lt;/a&gt;先移除旧版的docker如果没有就跳过&lt;/h3&gt;&lt;ul&gt;
</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker保存镜像</title>
    <link href="https://bigdata-yx.github.io/posts/287f.html"/>
    <id>https://bigdata-yx.github.io/posts/287f.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="提交：docker-commit"><a href="#提交：docker-commit" class="headerlink" title="提交：docker commit"></a>提交：docker commit</h3><ul><li>docker commit [option] 名字就是用着的那个镜像的名字 新建镜像的名字:版本号</li><li>docker commit -m “update index.html” mynginx mynginx:1.0</li><li>-m 版本信息之类的</li></ul><h3 id="保存-docker-save"><a href="#保存-docker-save" class="headerlink" title="保存: docker save"></a>保存: docker save</h3><ul><li>docker save -o mynginx.tar mynginx:1.0</li><li>-o 保存出来就是本地</li></ul><h3 id="加载：docker-load"><a href="#加载：docker-load" class="headerlink" title="加载：docker load"></a>加载：docker load</h3><p>docker load -i mynginx.tar</p><p>-i就是读取本地的镜像</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;提交：docker-commit&quot;&gt;&lt;a href=&quot;#提交：docker-commit&quot; class=&quot;headerlink&quot; title=&quot;提交：docker commit&quot;&gt;&lt;/a&gt;提交：docker commit&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;docker c</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker分享社区</title>
    <link href="https://bigdata-yx.github.io/posts/e3ea.html"/>
    <id>https://bigdata-yx.github.io/posts/e3ea.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="登录：docker-login"><a href="#登录：docker-login" class="headerlink" title="登录：docker login"></a>登录：docker login</h3><h3 id="命令-docker-tag"><a href="#命令-docker-tag" class="headerlink" title="命令:docker tag"></a>命令:docker tag</h3><ul><li>docker tag 原来的镜像名:版本号 新的镜像名:版本号</li><li>还可以docker tag mynginx:v1.0 lhx&#x2F;mynginx:v1.0 改名都是用户名&#x2F;镜像这样子的</li></ul><p>推荐在制作一个最新版本的镜像， 就是latest    docker tag mynginx:v1.0 lhx&#x2F;mynginx:latest然后在推送上去</p><h4 id="推送：docker-push-镜像名字"><a href="#推送：docker-push-镜像名字" class="headerlink" title="推送：docker push + 镜像名字"></a>推送：docker push + 镜像名字</h4><p><img src="/posts/e3ea.htm/Users\LHX\AppData\Roaming\Typora\typora-user-images\image-20241025115810209.png" alt="image-20241025115810209"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;登录：docker-login&quot;&gt;&lt;a href=&quot;#登录：docker-login&quot; class=&quot;headerlink&quot; title=&quot;登录：docker login&quot;&gt;&lt;/a&gt;登录：docker login&lt;/h3&gt;&lt;h3 id=&quot;命令-docker-tag</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker国内镜像源</title>
    <link href="https://bigdata-yx.github.io/posts/ec39.html"/>
    <id>https://bigdata-yx.github.io/posts/ec39.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="进入配置文件registry-mirror：需要重启docker服务"><a href="#进入配置文件registry-mirror：需要重启docker服务" class="headerlink" title="进入配置文件registry mirror：需要重启docker服务"></a>进入配置文件registry mirror：需要重启docker服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/docker</span><br><span class="line">tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">&quot;registry-mirrors&quot;: [</span><br><span class="line">&quot;https://do.nark.eu.org&quot;,</span><br><span class="line">&quot;https://dc.j8.work&quot;,</span><br><span class="line">&quot;https://docker.m.daocloud.io&quot;,</span><br><span class="line">&quot;https://dockerproxy.com&quot;,</span><br><span class="line">&quot;https://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">&quot;https://docker.nju.edu.cn&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;进入配置文件registry-mirror：需要重启docker服务&quot;&gt;&lt;a href=&quot;#进入配置文件registry-mirror：需要重启docker服务&quot; class=&quot;headerlink&quot; title=&quot;进入配置文件registry mirror：需要</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker存储</title>
    <link href="https://bigdata-yx.github.io/posts/ade7.html"/>
    <id>https://bigdata-yx.github.io/posts/ade7.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<ol><li>目录挂载：-v 外目录:内目录</li><li>例子：docker run -d -p 80:80 -v &#x2F;app&#x2F;nghtml:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html –name app01 nginx</li><li>卷映射 -v 卷名:内目录</li><li>例子：docker run -d -p 80:80 -v ngconf:&#x2F;etc&#x2F;nginx</li><li>卷的统一位置在：&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;</li><li>列出所有的卷docker volume ls</li><li>新建卷docker volume create hkjcpdd</li><li>查看卷的详情docker volume inspect ngconf</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;目录挂载：-v 外目录:内目录&lt;/li&gt;
&lt;li&gt;例子：docker run -d -p 80:80 -v &amp;#x2F;app&amp;#x2F;nghtml:&amp;#x2F;usr&amp;#x2F;share&amp;#x2F;nginx&amp;#x2F;html –name app01 n</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker架构</title>
    <link href="https://bigdata-yx.github.io/posts/af13.html"/>
    <id>https://bigdata-yx.github.io/posts/af13.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="下载镜像的话就是，docker-pull-镜像-镜像-x3D-标签-版本-latest为最新"><a href="#下载镜像的话就是，docker-pull-镜像-镜像-x3D-标签-版本-latest为最新" class="headerlink" title="下载镜像的话就是，docker pull + 镜像  镜像&#x3D;标签+版本  latest为最新"></a>下载镜像的话就是，docker pull + 镜像  镜像&#x3D;标签+版本  latest为最新</h3><ul><li>下载别的版本的话就是去dockerhub上看</li><li>检索docker search + 名字</li><li>列表：docker images</li><li>删除：docker rmi + 完整标签或者id 如：docker rmi nginx:latest</li></ul><h3 id="运行镜像的话就是，docker-run-options-image-commend-arg…-后面是启动命令但是一般的镜像都有自己的启动命令个所以可不加"><a href="#运行镜像的话就是，docker-run-options-image-commend-arg…-后面是启动命令但是一般的镜像都有自己的启动命令个所以可不加" class="headerlink" title="运行镜像的话就是，docker run [options] image [commend] [arg…] 后面是启动命令但是一般的镜像都有自己的启动命令个所以可不加"></a>运行镜像的话就是，docker run [options] image [commend] [arg…] 后面是启动命令但是一般的镜像都有自己的启动命令个所以可不加</h3><ul><li>后台运行-d</li><li>起个名字 –name</li><li>端口映射 -p 80:80</li></ul><ol><li><p>查看docker ps</p></li><li><p>停止 docker stop</p></li><li><p>启动docker start</p></li><li><p>重启 docker restart </p></li><li><p>状态 docker stats</p></li><li><p>日志 docker logs</p></li><li><p>进入 docker exec</p><p>docker exec -it mynginx &#x2F;bin&#x2F;bash</p><p>-it是交互模式</p><p>后面的路径是让他在控制台上显示</p></li><li><p>删除 docker rm</p></li><li><p>用docker构建自己的软件包，docker build + 镜像</p></li><li><p>发给应用市场让dock保存的话就是，dock push + 镜像</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;下载镜像的话就是，docker-pull-镜像-镜像-x3D-标签-版本-latest为最新&quot;&gt;&lt;a href=&quot;#下载镜像的话就是，docker-pull-镜像-镜像-x3D-标签-版本-latest为最新&quot; class=&quot;headerlink&quot; title=&quot;</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker网络</title>
    <link href="https://bigdata-yx.github.io/posts/5796.html"/>
    <id>https://bigdata-yx.github.io/posts/5796.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>查看容器的细节</p><p>docker inspect app2</p><p>docker network + 功能</p><p><img src="/posts/5796.htm/Users\LHX\AppData\Roaming\Typora\typora-user-images\image-20241025120003627.png" alt="image-20241025120003627"></p><h4 id="环境变量就用-e"><a href="#环境变量就用-e" class="headerlink" title="环境变量就用-e"></a>环境变量就用-e</h4>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;查看容器的细节	&lt;/p&gt;
&lt;p&gt;docker inspect app2&lt;/p&gt;
&lt;p&gt;docker network + 功能&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/5796.htm/Users\LHX\AppData\Roaming\Typora\typora-u</summary>
      
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>docker保存镜像</title>
    <link href="https://bigdata-yx.github.io/posts/287f.html"/>
    <id>https://bigdata-yx.github.io/posts/287f.html</id>
    <published>2024-10-25T03:14:35.000Z</published>
    <updated>2024-10-25T03:14:35.000Z</updated>
    
    
    
    
    <category term="Docker" scheme="https://bigdata-yx.github.io/categories/Docker/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>yum配置</title>
    <link href="https://bigdata-yx.github.io/posts/dfc4.html"/>
    <id>https://bigdata-yx.github.io/posts/dfc4.html</id>
    <published>2024-10-25T01:48:52.000Z</published>
    <updated>2024-10-25T01:48:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="普通配置"><a href="#普通配置" class="headerlink" title="普通配置"></a>普通配置</h2><ul><li><p>关闭防火墙</p></li><li><p>然后关闭selinux</p></li><li><p>查看网卡 nmcli c s</p></li><li><p>刷新网卡 nmcli c u ens33</p></li><li><p>开启ssh远程连接 vi &#x2F;etc&#x2F;ssh&#x2F;sshd_config</p></li><li><p>刷新服务 systemctl restart sshd</p></li><li><p>先暂时挂载mount &#x2F;opt&#x2F;镜像 &#x2F;mnt&#x2F;</p></li><li><p>然后永久挂载echo &#x2F;opt&#x2F;镜像 &#x2F;mnt&#x2F; iso9660 defaults 0 0 &gt;&gt; &#x2F;etc&#x2F;fstab</p></li><li><p>然后进入&#x2F;etc&#x2F;yum.repo</p></li><li><p>全部删除</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/yum.repo</span><br><span class="line">[1]</span><br><span class="line">name=1</span><br><span class="line">baseurl=file:///mnt/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">yum repolist all</span><br></pre></td></tr></table></figure></li></ul><h3 id="阿里云源："><a href="#阿里云源：" class="headerlink" title="阿里云源："></a>阿里云源：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">先安装wget    yum install wget -y</span><br><span class="line">然后拿文件</span><br><span class="line">wget -O /etc/yum.repo.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">然后清理缓存还有生成新的缓存</span><br><span class="line">清理 yum clean all</span><br><span class="line">生成 yum makecache</span><br><span class="line">接下来下载epel库</span><br><span class="line">yum install epel-release -y</span><br><span class="line">然后重复一次清理和生成就可以了</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;普通配置&quot;&gt;&lt;a href=&quot;#普通配置&quot; class=&quot;headerlink&quot; title=&quot;普通配置&quot;&gt;&lt;/a&gt;普通配置&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;关闭防火墙&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;然后关闭selinux&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查</summary>
      
    
    
    
    <category term="大数据" scheme="https://bigdata-yx.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
    <category term="示例" scheme="https://bigdata-yx.github.io/tags/%E7%A4%BA%E4%BE%8B/"/>
    
    <category term="demo" scheme="https://bigdata-yx.github.io/tags/demo/"/>
    
  </entry>
  
</feed>
